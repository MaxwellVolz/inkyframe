(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{810:function(t,e){},811:function(t,e,n){t.exports=n.p+"media/components/leaflet/static/folder-f5f1d41851e7a57271081046a57d8487.svg"},812:function(t,e){!function(){"use strict";L.Control.ZoomHome=L.Control.Zoom.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomHomeIcon:"home",zoomHomeTitle:"Home",homeCoordinates:null,homeZoom:null},onAdd:function(t){var e="leaflet-control-zoomhome",n=L.DomUtil.create("div",e+" leaflet-bar"),o=this.options;null===o.homeCoordinates&&(o.homeCoordinates=t.getCenter()),null===o.homeZoom&&(o.homeZoom=t.getZoom()),this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn.bind(this));var r='<i class="fa fa-'+o.zoomHomeIcon+'" style="line-height:1.65;"></i>';return this._zoomHomeButton=this._createButton(r,o.zoomHomeTitle,e+"-home",n,this._zoomHome.bind(this)),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut.bind(this)),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},setHomeBounds:function(t){void 0===t?t=this._map.getBounds():"function"!==typeof t.getCenter&&(t=L.latLngBounds(t)),this.options.homeZoom=this._map.getBoundsZoom(t),this.options.homeCoordinates=t.getCenter()},setHomeCoordinates:function(t){void 0===t&&(t=this._map.getCenter()),this.options.homeCoordinates=t},setHomeZoom:function(t){void 0===t&&(t=this._map.getZoom()),this.options.homeZoom=t},getHomeZoom:function(){return this.options.homeZoom},getHomeCoordinates:function(){return this.options.homeCoordinates},_zoomHome:function(t){this._map.setView(this.options.homeCoordinates,this.options.homeZoom)}}),L.Control.zoomHome=function(t){return new L.Control.ZoomHome(t)}}()},813:function(t,e,n){},817:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return vt}));var o=n(22),r=n.n(o),i=(n(801),n(802),n(803),n(804),n(805),n(806),n(807),n(808),n(809)),a=n.n(i);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(){return(u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=l(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return h(this,n)}}function h(t,e){if(e&&("object"===s(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(i,t);var e,n,o,r=f(i);function i(t,e,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(o=r.call(this,e,n)).id=t,o}return e=i,(n=[{key:"onAdd",value:function(t){this.init(t),u(d(i.prototype),"onAdd",this).call(this,t)}},{key:"visibleOnZoomLevel",value:function(t){return this.constructor.visibleOnZoomLevel(t)}}])&&c(e.prototype,n),o&&c(e,o),Object.defineProperty(e,"prototype",{writable:!1}),i}(r.a.Marker);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=k(t);if(e){var r=k(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return w(this,n)}}function w(t,e){if(e&&("object"===m(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(a,t);var e,n,o,i=_(a);function a(t,e){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,a);var s=t.lat,c=t.lng,u=a.typeString,l="".concat(u,"__").concat(s,"-").concat(c),p=new r.a.LatLng(s,c);return(n=i.call(this,l,p,o)).data=t,n.units=e,n}return e=a,o=[{key:"visibleOnZoomLevel",value:function(t){return t>=9}}],(n=[{key:"init",value:function(){var t=this;this.render(),window.matchMedia("(hover: hover) and (pointer: fine)").matches&&(this.on("mouseover",(function(){return t.openPopup()})),this.on("mouseout",(function(){return t.closePopup()}))),this.units.onChange((function(){return t.render()}))}},{key:"render",value:function(){this.setIcon(this.renderIcon());var t=this.renderPopupContent();this.getPopup()?this.getPopup().setContent(t):this.bindPopup(t,{autoPan:!1,closeButton:!1})}},{key:"renderIcon",value:function(){var t=document.createElement("div"),e=this.units.formatTemp(this.data.temp,{withUnits:!0,precision:1});return t.innerText=e,r.a.divIcon({className:"leaflet__sea-temp-marker",iconSize:[28,16],html:t})}},{key:"renderPopupContent",value:function(){var t=this.units.formatTemp(this.data.temp,{withUnits:!0,precision:1}),e=this.units.formatTemp(this.data.anomaly,{withUnits:!0});return'<div class="leaflet-popup__title">Sea Water Temp</div>\n      <div class="leaflet-popup__sea-temp">\n        <div><span>Temp:</span> <span>'.concat(t,"</span></div>\n        <div><span>Anomaly:</span> <span>").concat(e,"</span></div>\n      </div>")}}])&&b(e.prototype,n),o&&b(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(y);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=R(t);if(e){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return M(this,n)}}function M(t,e){if(e&&("object"===P(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}O(L,"typeString","sea_temp"),O(L,"visibleOnScreenshotMode",!1);var Z,E,B,x=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(i,t);var e,n,o,r=S(i);function i(){return C(this,i),r.apply(this,arguments)}return e=i,o=[{key:"visibleOnZoomLevel",value:function(t){return t<=9&&t>=5}}],(n=null)&&T(e.prototype,n),o&&T(e,o),Object.defineProperty(e,"prototype",{writable:!1}),i}(L);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=N(t);if(e){var r=N(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return D(this,n)}}function D(t,e){if(e&&("object"===z(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}B="regional_sea_temp",(E="typeString")in(Z=x)?Object.defineProperty(Z,E,{value:B,enumerable:!0,configurable:!0,writable:!0}):Z[E]=B;var W=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(a,t);var e,n,o,i=A(a);function a(t,e){var n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;H(this,a);var c="location_".concat(t.filename),u=new r.a.LatLng(t.lat,t.lng);return(n=i.call(this,c,u,s)).location=t,n.locationURL=e,n.current=o,n}return e=a,o=[{key:"visibleOnZoomLevel",value:function(t){return t>9}}],(n=[{key:"init",value:function(){var t=this;this.render(),window.matchMedia("(hover: hover) and (pointer: fine)").matches&&this.on("mouseover",(function(){return t.openPopup()})),this.on("click",(function(){t.isPopupOpen()?window.location.href=t.locationURL:t.openPopup()}))}},{key:"render",value:function(){this.setIcon(this.renderIcon()),this.bindPopup(this.renderPopupContent(),{autoPan:!1,closeButton:!1}),this.off("click")}},{key:"renderPopupContent",value:function(){var t=this.location,e=t.name,n=t.type,o=t.rating_icon;return'<a class="leaflet-popup__title" href="'.concat(this.locationURL,'">').concat(e,'</a>\n            <div class="leaflet-popup__type-and-rating">\n              <div class="leaflet-popup__type">\n                ').concat(n,'\n              </div>\n              <div class="leaflet-popup__rating-icon">\n                <img src="').concat(o,'"/>\n              </div>\n            </div>')}},{key:"renderIcon",value:function(){var t=this.current?[25,34]:[25,25],e=["leaflet-icon"];return this.location.hidden&&!this.current&&e.push(["leaflet-icon--transparent"]),r.a.icon({className:e.join(" "),iconSize:t,iconUrl:this.location.icon})}}])&&I(e.prototype,n),o&&I(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(y);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Q(t);if(e){var r=Q(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return K(this,n)}}function K(t,e){if(e&&("object"===V(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}F(W,"typeString","locations"),F(W,"visibleOnScreenshotMode",!0);var tt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(a,t);var e,n,o,i=G(a);function a(t,e,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var s="buoy_".concat(t.url_part),c=new r.a.LatLng(t.lat,t.lng);return(o=i.call(this,s,c,n)).buoy=t,o.units=e,o.arrowClass="leaflet__marker-arrow",o.buoyHeightClass="leaflet__buoy-wave-height",o}return e=a,o=[{key:"visibleOnZoomLevel",value:function(t){return t>=5}}],(n=[{key:"init",value:function(t){var e=this;this.render(t.getZoom()),window.matchMedia("(hover: hover) and (pointer: fine)").matches&&(this.on("mouseover",(function(){return e.openPopup()})),this.on("mouseout",(function(){return e.closePopup()}))),this.on("click",(function(){e.isPopupOpen()?window.location.href=e.buoyURL():e.openPopup()})),this.units.onChange((function(){return e.render()}))}},{key:"render",value:function(t){this.setIcon(this.renderIcon(t));var e=this.renderPopupContent();this.getPopup()?this.getPopup().setContent(e):(this.bindPopup(e,{autoPan:!1,closeButton:!1}),this.off("click"))}},{key:"renderIcon",value:function(t){var e=this.buoy,n=e.wave_height,o=e.wave_dir,i=e.age,a=document.createElement("div");a.classList.add("leaflet__buoy-content");var s=["leaflet__buoy"];if(n){var c=document.createElement("span");c.classList.add(this.buoyHeightClass),c.innerText=this.units.formatLength(n),a.appendChild(c)}else a.innerText="N/A",s.push("leaflet__buoy--empty");if(o){var u,l=document.createElement("div");(u=l.classList).add.apply(u,["leaflet__buoy-arrow"].concat(q(this.markerArrowClass(o)))),a.appendChild(l)}return 2!==i&&n||s.push("leaflet__buoy--faded"),this.modClass=this.iconSizeModClass(t),this.modClass&&s.push(this.modClass),r.a.divIcon({className:s.join(" "),iconSize:[28,28],html:a})}},{key:"renderPopupContent",value:function(){var t=this.buoy,e=t.name,n=t.wave_height,o=t.timestamp,r=t.dominant,i=void 0===r?"-":r,a=t.average,s=void 0===a?"-":a,c="-";o&&(c=new Date(1e3*o).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}));var u='<a class="leaflet-popup__title" href="'.concat(this.buoyURL(),'">').concat(e,"</a>");return u+='<div class="leaflet-popup__buoy-info">',u+='<div class="leaflet-popup__buoy-wave-period">Wave Period ('.concat(c,"):</div>"),u+="Wave height: ",u+=n?this.units.formatLength(n,{withUnits:!0}):"-",u+="<br/>",u+="Dominant: ".concat(i).concat("-"!==i?"s":""," <br/>"),u+="Average: ".concat(s).concat("-"!==s?"s":""),u+="</div>"}},{key:"markerArrowClass",value:function(t){return[this.arrowClass,"".concat(this.arrowClass,"--").concat(t)]}},{key:"updateIconSize",value:function(t){var e=this.getElement(),n=this.iconSizeModClass(t);n!==this.modClass&&(this.modClass&&e.classList.remove(this.modClass),n&&e.classList.add(n),this.modClass=n)}},{key:"iconSizeModClass",value:function(t){return t>=5&&t<=8?"leaflet__buoy--size".concat(10*t+10,"p"):null}},{key:"buoyURL",value:function(){return"/buoys/".concat(this.buoy.url_part,"/hourly")}},{key:"visibleOnZoomLevel",value:function(t){var e=this.buoy,n=e.wave_height;return!((2===e.age||!n)&&t<=6)&&this.constructor.visibleOnZoomLevel(t)}}])&&Y(e.prototype,n),o&&Y(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(y);X(tt,"typeString","buoys"),X(tt,"visibleOnScreenshotMode",!1);var et=n(16);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=st(t);if(e){var r=st(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return at(this,n)}}function at(t,e){if(e&&("object"===nt(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ut=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(a,t);var e,n,o,i=it(a);function a(t,e,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var s=new r.a.LatLng(t.lat,t.lng),c="wind-marker__".concat(t.lat).concat(t.lng);return(o=i.call(this,c,s,n)).metar=t,o.units=e,o.mapUrl=t.map_url,o}return e=a,o=[{key:"visibleOnZoomLevel",value:function(t){return t>=7}}],(n=[{key:"init",value:function(){var t=this;this.render(),window.matchMedia("(hover: hover) and (pointer: fine)").matches&&(this.on("mouseover",(function(){return t.openPopup()})),this.on("mouseout",(function(){return t.closePopup()}))),this.on("click",(function(){t.isPopupOpen()&&t.mapUrl?window.location.href=t.mapUrl:t.openPopup()})),this.units.onChange((function(){return t.render()}))}},{key:"render",value:function(){this.setIcon(this.renderIcon());var t=this.renderPopupContent();this.getPopup()?this.getPopup().setContent(t):(this.bindPopup(t,{autoPan:!1,closeButton:!1}),this.off("click"))}},{key:"renderIcon",value:function(){var t=this.metar.wind_icon,e=document.createElement("div");return e.innerHTML=t,Object(et.a)(e,this.units),r.a.divIcon({className:"leaflet__wind-marker",iconSize:[28,28],html:e.childNodes[0]})}},{key:"renderPopupContent",value:function(){var t=this.metar,e=t.name,n=t.wind_icon,o=t.weather_icon,r=t.temp_color,i=t.temp,a=document.createElement("div"),s=this.units.formatSpeedUnits(),c='<div class="leaflet-popup__title">'.concat(e,'</div>\n                     <div class="leaflet-popup__metar-data">\n                       <div class="leaflet-popup__metar-data-item">\n                         <div class="leaflet-popup__metar-data-item-name">Wind (').concat(s,'):</div>\n                         <div class="leaflet-popup__metar-data-item-value">').concat(n,"</div>\n                       </div>");if(o&&(c+='<div class="leaflet-popup__metar-data-item">\n                      <div class="leaflet-popup__metar-data-item-name">Weather:</div>\n                      <div class="leaflet-popup__metar-data-item-value">\n                        '.concat(o,"\n                      </div>\n                    </div>")),""!==i&&"-"!==i&&"n/a"!==i){var u=this.units.formatTempUnits(),l=this.units.formatTemp(i);c+='<div class="leaflet-popup__metar-data-item">\n                      <div class="leaflet-popup__metar-data-item-name">Temp ('.concat(u,'):</div>\n                      <div class="leaflet-popup__metar-data-item-temp-value" style="background-color: ').concat(r,';">\n                        ').concat(l,"\n                      </div>\n                    </div>")}return c+="</div>",a.innerHTML=c,Object(et.a)(a,this.units),a}}])&&ot(e.prototype,n),o&&ot(e,o),Object.defineProperty(e,"prototype",{writable:!1}),a}(y);ct(ut,"typeString","metars"),ct(ut,"visibleOnScreenshotMode",!1);var lt,pt=n(811),ft=n.n(pt),ht=(lt=function(t,e){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}lt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ht(e,t),e.prototype.onAdd=function(){var t=r.a.DomUtil.create("div");return t.innerText="Lesser-known spots now hidden",t.classList.add("leaflet__hidden-notification"),t.classList.add("leaflet__hidden-notification--hidden"),t},e.prototype.toggle=function(t){t?this.show():this.hide()},e.prototype.show=function(){this.applyStyles(),this.getContainer().classList.remove("leaflet__hidden-notification--hidden")},e.prototype.hide=function(){this.getContainer().classList.add("leaflet__hidden-notification--hidden")},e.prototype.applyStyles=function(){var t=this.getMap().getContainer().clientWidth,e=this.getContainer();t<=420?(e.style.width="".concat(t,"px"),e.classList.add("leaflet__hidden-notification--squared")):(e.style.width="auto",e.classList.remove("leaflet__hidden-notification--squared"))},e.prototype.getMap=function(){return this._map},e}(r.a.Control),yt=n(5);n(812),n(813);function mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}a()();var vt=function(){function t(e,n,o){var r=o.lat,i=o.lng,a=o.topoUrl,s=o.destinationPage,c=o.currentLocationFilename,u=o.startingZoomLevel,l=void 0===u?10:u,p=o.maxZoomLevel,f=void 0===p?15:p,h=o.screenshotMode,d=void 0!==h&&h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.lat=r,this.lng=i,this.topoUrl=a,this.destinationPage=s,this.currentLocationFilename=c,this.maxZoomLevel=f,this.startingZoomLevel=l,this.units=n,this.markers=[],this.placesLayers=null,this.hiddenBreakTooltip=null,this.hiddenBreakTooltipShown=!1,this.markerTypes=[L,x,W,tt,ut],this.visibleMarkerTypes=[],this.screenshotMode=d}var e,n,o;return e=t,o=[{key:"topoAttribution",value:function(){return'Map data: &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Rendering: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},{key:"getPlaces",value:function(){return fetch("/osm/coordinates.json",{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("".concat(t.status,": ").concat(t.statusText));return t.json()}))}}],(n=[{key:"init",value:function(t){var e=this,n=document.createElement("div");this.el.appendChild(n),this.map=r.a.map(n,{zoomControl:!1,gestureHandling:!0,attributionControl:!this.screenshotMode}).setView([this.lat,this.lng],this.startingZoomLevel).on("moveend",(function(){return e.updateMarkers()})).on("zoomend",(function(){return e.handleZoom()})),this.renderTileLayer(),this.screenshotMode||this.addControls(),this.updateVisibleMarkerTypes(),this.updateMarkers().then((function(){e.markers.find((function(t){return t.current})).openPopup(),t()}))}},{key:"addControls",value:function(){var t=this,e={color:"red",opacity:1,fillOpacity:1,weight:2,clickable:!1};r.a.Control.FileLayerLoad.LABEL='<img class="icon" src="'.concat(ft.a,'" alt="file icon" style="width: 17px; height: 18px"/>'),r.a.Control.fileLayerLoad({fitBounds:!0,layerOptions:{style:e,pointToLayer:function(t,n){return r.a.circleMarker(n,{style:e})}}}).addTo(this.map),this.map.addControl(new r.a.Control.Fullscreen),this.map.on("fullscreenchange",(function(e){var n="leaflet--fullscreen",o=t.map.getContainer();o.classList.contains(n)?o.classList.remove(n):o.classList.add(n)})),this.map.addControl(r.a.Control.zoomHome()),r.a.control.locate({locateOptions:{enableHighAccuracy:!0},icon:"fa fa-dot-circle-o"}).addTo(this.map),this.initScaleControl(),yt.a.onChange((function(){t.scaleControl&&t.scaleControl.remove(),t.initScaleControl()})),this.map.on("fullscreenchange",(function(){t.scaleControl&&t.scaleControl.setPosition(t.scaleControlPosition())})),this.map._controlCorners.bottomcenter=r.a.DomUtil.create("div","leaflet-bottom leaflet-center",this._controlContainer),this.map._controlContainer.appendChild(this.map._controlCorners.bottomcenter),this.hiddenNotification=new dt({position:"bottomcenter"}),this.hiddenNotification.addTo(this.map),this.map.on("fullscreenchange",(function(){return t.hiddenNotification.applyStyles()}))}},{key:"initScaleControl",value:function(){var t="Imperial"===yt.a.current.length,e={imperial:t,metric:!t,position:this.scaleControlPosition()};this.scaleControl=r.a.control.scale(e),this.scaleControl.addTo(this.map)}},{key:"scaleControlPosition",value:function(){return this.map.getSize().x>=680?"bottomleft":"topright"}},{key:"renderTileLayer",value:function(){var e=this,n=r.a.tileLayer(this.topoUrl,{opacity:.9,maxZoom:this.maxZoomLevel,attribution:t.topoAttribution()}).addTo(this.map);this.screenshotMode&&(n.on("loading",(function(){e.el.dataset.tilesLoaded=!1})),n.on("load",(function(){e.el.dataset.tilesLoaded=!0}))),n.addTo(this.map)}},{key:"getMarkers",value:function(){var t=this.map.getBounds(),e=t.getSouthWest(),n=t.getNorthEast(),o="/osm/points_of_interest.json";return o+="?bbox=".concat(e.lat,",").concat(e.lng,",").concat(n.lat,",").concat(n.lng),o+="&current_location=".concat(this.currentLocationFilename),o+="&types=".concat(this.visibleMarkerTypes.join()),fetch(o,{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("".concat(t.status,": ").concat(t.statusText));return t.json()}))}},{key:"handleHiddenBreakTooltip",value:function(t){this.hiddenBreakTooltipShown||(this.hiddenBreakTooltip=r.a.popup({autoPan:!1,closeButton:!1,className:"leaflet-popup--hidden-location"}).setLatLng(new r.a.LatLng(t.lat,t.lng)).setContent("Exact location hidden").openOn(this.map),this.hiddenBreakTooltipShown=!0)}},{key:"renderLocationMarker",value:function(t){var e=this.currentLocationFilename===t.filename,n=new W(t,this.locationURL(t.filename),e);this.markerRendered(n.id)||(e&&t.hidden&&!this.screenshotMode&&this.handleHiddenBreakTooltip(t),n.addTo(this.map),this.markers.push(n))}},{key:"renderBuoyMarker",value:function(t){var e=new tt(t,this.units),n=this.markerRendered(e.id);n?n.updateIconSize(this.map.getZoom()):e.visibleOnZoomLevel(this.map.getZoom())&&(e.addTo(this.map),this.markers.push(e))}},{key:"renderMetarMarker",value:function(t){var e=new ut(t,this.units);this.markerRendered(e.id)||(e.addTo(this.map),this.markers.push(e))}},{key:"renderSeaTempMarker",value:function(t){var e=new L(t,this.units);this.markerRendered(e.id)||(e.addTo(this.map),this.markers.push(e))}},{key:"renderRegionalSeaTempMarker",value:function(t){var e=new x(t,this.units);this.markerRendered(e.id)||(e.addTo(this.map),this.markers.push(e))}},{key:"drawMarkers",value:function(t){var e=this,n=this.map.getZoom();if(t.locations&&W.visibleOnZoomLevel(n)){var o=this.showHiddenLocations();t.locations.forEach((function(t){t.hidden&&!o||e.renderLocationMarker(t)}))}t.metars&&ut.visibleOnZoomLevel(n)&&t.metars.forEach((function(t){return e.renderMetarMarker(t)})),t.buoys&&tt.visibleOnZoomLevel(n)&&t.buoys.forEach((function(t){return e.renderBuoyMarker(t)})),t.sea_temp&&L.visibleOnZoomLevel(n)&&t.sea_temp.forEach((function(t){return e.renderSeaTempMarker(t)})),t.regional_sea_temp&&x.visibleOnZoomLevel(n)&&t.regional_sea_temp.forEach((function(t){return e.renderRegionalSeaTempMarker(t)}))}},{key:"drawPlaces",value:function(t){var e=r.a.TileLayer.maskCanvas({radius:1e3,useAbsoluteRadius:!0,color:"#0c31ac",opacity:0,noMask:!0,lineColor:"#000"});e.setData(t.locations),this.map.addLayer(e);var n=r.a.TileLayer.maskCanvas({radius:1e3,useAbsoluteRadius:!0,color:"#E27A5F",opacity:0,noMask:!0,lineColor:"#E27A5F"});n.setData(t.buoys),this.map.addLayer(n),this.placesLayers={locations:e,buoys:n}}},{key:"locationURL",value:function(t){var e="/breaks/".concat(t);return"seven_day_forecast"===this.destinationPage?e+="/forecasts/latest/six_day":"hourly_forecast"===this.destinationPage&&(e+="/forecasts/latest"),e}},{key:"markerRendered",value:function(t){return this.markers.find((function(e){return e.id===t}))}},{key:"handleZoom",value:function(){this.hiddenNotification.toggle(!this.showHiddenLocations()),this.updateVisibleMarkerTypes(),this.removeUnnecessaryMarkers(),this.hiddenBreakTooltip&&this.hiddenBreakTooltip.isOpen()&&(this.map.closePopup(),this.hiddenBreakTooltip=null),this.updateMarkers(),this.processPlacesLayer()}},{key:"processPlacesLayer",value:function(){var e=this;"fetching"!==this.placesLayers&&(this.map.getZoom()>9?this.placesLayers&&(this.placesLayers.locations.setOpacity(0),this.placesLayers.buoys.setOpacity(0)):this.placesLayers?(this.placesLayers.locations.setOpacity(.9),this.map.getZoom()>=5?this.placesLayers.buoys.setOpacity(0):this.placesLayers.buoys.setOpacity(.9)):(this.placesLayers="fetching",t.getPlaces().then((function(t){e.drawPlaces(t),e.processPlacesLayer()})).catch((function(t){console.error(t),e.placesLayers=null}))))}},{key:"updateMarkers",value:function(){var t=this;return 0===this.visibleMarkerTypes.length?Promise.resolve():(this.el.dataset.markersLoaded=!1,this.getMarkers().then((function(e){t.el.dataset.markersLoaded=!0,t.drawMarkers(e)})))}},{key:"removeUnnecessaryMarkers",value:function(){var t=this.map.getBounds(),e=this.map.getZoom(),n=this.showHiddenLocations();this.markers=this.markers.filter((function(o){return o.visibleOnZoomLevel(e)&&t.contains(o.getLatLng())&&!(o.location&&o.location.hidden&&!n)||(o.remove(),!1)}))}},{key:"updateVisibleMarkerTypes",value:function(){var t=this,e=[],n=this.map.getZoom();this.markerTypes.forEach((function(o){!o.visibleOnZoomLevel(n)||t.screenshotMode&&!o.visibleOnScreenshotMode||e.push(o.typeString)})),this.visibleMarkerTypes=e}},{key:"showHiddenLocations",value:function(){return this.map.getMaxZoom()-this.map.getZoom()>2}}])&&mt(e.prototype,n),o&&mt(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()}}]);
//# sourceMappingURL=leaflet-ad7a9596550c97cbe723.chunk.js.map